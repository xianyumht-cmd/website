window.themeMode={current:"auto",autoState:"light",init:function(){const e=this.getCookie("theme_mode")||"auto";this.current=e,"auto"===this.current?this.setAutoMode():this.applyTheme(this.current),this.addSystemThemeListener(),"auto"===this.current&&this.startAutoCheck()},setAutoMode:function(){const e=new Date().getHours(),t=e>=6&&e<18?"light":"dark";this.autoState!==t&&(this.autoState=t,this.applyTheme(t)),this.current="auto",this.setCookie("theme_mode","auto",30)},setLightMode:function(){this.current="light",this.applyTheme("light"),this.setCookie("theme_mode","light",30),this.stopAutoCheck()},setDarkMode:function(){this.current="dark",this.applyTheme("dark"),this.setCookie("theme_mode","dark",30),this.stopAutoCheck()},toggleMode:function(){switch(this.current){case"auto":return this.setLightMode(),"light";case"light":return this.setDarkMode(),"dark";default:return this.setAutoMode(),"auto"}},applyTheme:function(e){"dark"===e?(document.body.classList.add("night"),document.getElementById("notice")&&(document.getElementById("notice").style.backgroundColor="#464646"),this.updateThemeUI("dark")):(document.body.classList.remove("night"),document.getElementById("notice")&&(document.getElementById("notice").style.backgroundColor="#fff"),this.updateThemeUI("light"))},updateThemeUI:function(e){const t=document.getElementById("theme-icon"),n=document.getElementById("theme-icon-img"),o=document.getElementById("theme-text");t&&(t.className="dark"===e?"fa-solid fa-sun":"fa-solid fa-moon"),n&&("auto"===this.current?n.src="../images/ico/auto-theme-icon.svg":"dark"===e?n.src="../images/ico/sun-icon.svg":n.src="../images/ico/moon-icon.svg"),o&&("auto"===this.current?o.textContent="自动模式":o.textContent="dark"===e?"切换日间模式":"切换夜间模式")},startAutoCheck:function(){this.stopAutoCheck(),this.autoCheckInterval=setInterval(()=>{"auto"===this.current&&this.setAutoMode()},36e5)},stopAutoCheck:function(){this.autoCheckInterval&&(clearInterval(this.autoCheckInterval),this.autoCheckInterval=null)},addSystemThemeListener:function(){window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{})},getCookie:function(e){const t=`; ${document.cookie}`.split(`; ${e}=`);if(2===t.length)return t.pop().split(";").shift();return null},setCookie:function(e,t,n){let o="";if(n){const e=new Date;e.setTime(e.getTime()+24*n*60*60*1e3),o=`; expires=${e.toUTCString()}`}document.cookie=`${e}=${t}${o}; path=/`}};document.addEventListener("DOMContentLoaded",function(){themeMode.init()}),window.themeMode=themeMode;