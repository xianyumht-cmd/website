window.enhancedTranslation={init:function(){const e=()=>{window.languageSwitcher?(this.extendTranslations(),this.extendApplyLanguage(),console.log("增强翻译功能已初始化")):console.error("语言切换器加载超时，无法初始化增强翻译功能")};if(window.languageSwitcher){e();}else{const checkInterval=setInterval(()=>{if(window.languageSwitcher){clearInterval(checkInterval);e();}},200);setTimeout(()=>{clearInterval(checkInterval);if(!window.languageSwitcher)console.warn("语言切换器加载超时 (10s)");},10000)}},extendTranslations:function(){window.languageSwitcher.translations.sections={},window.languageSwitcher.translations.sections.titles={"常用工具":{zh:"常用工具",en:"Common Tools"},"GS专区":{zh:"GS专区",en:"GS Zone"},"BGX专区":{zh:"BGX专区",en:"BGX Zone"},"天卡专区":{zh:"天卡专区",en:"Daily Card Zone"},"周卡专区":{zh:"周卡专区",en:"Weekly Card Zone"},"月卡专区":{zh:"月卡专区",en:"Monthly Card Zone"},"一体化区":{zh:"一体化区",en:"Integration Zone"},"云顶专区":{zh:"云顶专区",en:"TFT Zone"},"缓存专区":{zh:"缓存专区",en:"Cache Zone"},"特权专区":{zh:"特权专区",en:"Privilege Zone"},"过机器码专区":{zh:"过机器码专区",en:"Machine Code Zone"}},window.languageSwitcher.translations.common={"密码":{zh:"密码",en:"Password"},"自带":{zh:"自带",en:"Built-in"},"支持":{zh:"支持",en:"Supports"},"数据库":{zh:"数据库",en:"Database"},"工具":{zh:"工具",en:"Tools"},"修复":{zh:"修复",en:"Fix"},"远程":{zh:"远程",en:"Remote"},"控制":{zh:"控制",en:"Control"},"软件":{zh:"软件",en:"Software"},"问题":{zh:"问题",en:"Issues"},"运行":{zh:"运行",en:"Run"},"组件":{zh:"组件",en:"Components"},"清理":{zh:"清理",en:"Clean"},"卡":{zh:"卡",en:"Card"},"专区":{zh:"专区",en:"Zone"},"一体":{zh:"一体",en:"All-in-one"},"特权":{zh:"特权",en:"Privilege"},"加速器":{zh:"加速器",en:"Accelerator"},"网吧":{zh:"网吧",en:"Internet Cafe"},"机器":{zh:"机器",en:"Machine"}}},extendApplyLanguage:function(){const e=window.languageSwitcher.applyLanguage;window.languageSwitcher.applyLanguage=function(n){e.call(this,n),enhancedTranslation.updateNavDataLanguage(n),enhancedTranslation.translateSectionTitles(n),enhancedTranslation.translateItems(n)}},updateNavDataLanguage:function(e){if("function"==typeof window.getNavData){window.currentNavLanguage=e;const n=new CustomEvent("navLanguageChanged",{detail:{language:e}});document.dispatchEvent(n),console.log("导航数据语言已更新为:",e)}},translateSectionTitles:function(e){document.querySelectorAll(".text-gray").forEach(n=>{const t=n.textContent.trim(),a=this.translateSectionTitle(t,e),o=n.querySelector("i");o?(n.innerHTML="",n.appendChild(o),n.appendChild(document.createTextNode(" "+a))):n.textContent=a})},translateSectionTitle:function(e,n){const t=window.languageSwitcher.translations.sections.titles;return t[e]&&t[e][n]?t[e][n]:e},translateItems:function(e){if("zh"===e)return void this.restoreOriginalContent();document.querySelectorAll(".xe-comment").forEach(n=>{const t=n.querySelector(".xe-user-name strong");t&&(t.hasAttribute("data-original")||t.setAttribute("data-original",t.textContent),t.textContent=this.translateText(t.getAttribute("data-original"),e));const a=n.querySelector(".overflowClip_2");a&&(a.hasAttribute("data-original")||a.setAttribute("data-original",a.textContent),a.textContent=this.translateText(a.getAttribute("data-original"),e))})},restoreOriginalContent:function(){document.querySelectorAll(".xe-user-name strong[data-original]").forEach(e=>{e.textContent=e.getAttribute("data-original")});document.querySelectorAll(".overflowClip_2[data-original]").forEach(e=>{e.textContent=e.getAttribute("data-original")})},translateText:function(e,n){if("zh"===n)return e;const t=window.languageSwitcher.translations.common;let a=e;for(const[e,o]of Object.entries(t))a.includes(e)&&(a=a.replace(new RegExp(e,"g"),o[n]));return a}};document.addEventListener("DOMContentLoaded",function(){window.enhancedTranslation.init()}),window.enhancedTranslation=enhancedTranslation;