(function(){'use strict';let currentLanguage='zh';const translations={zh:{'title':'世界和平','fuqiang':'富強','minzhu':'民主','wenming':'文明','hexie':'和諧','ziyou':'自由','qunliao1':'超凡发卡','qunliao2':'金币精粹','qunliao3':'租号陪玩','qunliao4':'资料中心','qunliao5':'备用发卡','translateButton':'Switch to English'},en:{'title':'World Peace','fuqiang':'Prosperity','minzhu':'Democracy','wenming':'Civilization','hexie':'Harmony','ziyou':'Freedom','qunliao1':'Premium Cards','qunliao2':'Gold & Essence','qunliao3':'Rent & Play','qunliao4':'Resource Center','qunliao5':'Backup Cards','translateButton':'切换为中文'}};function toggleLanguage(){currentLanguage=currentLanguage==='zh'?'en':'zh';applyTranslations();const translateButton=document.getElementById('translateButton');if(translateButton){translateButton.textContent=translations[currentLanguage]['translateButton'];}try{localStorage.setItem('preferredLanguage',currentLanguage);}catch(e){console.error('Failed to save language preference:',e);}}function applyTranslations(){document.title=translations[currentLanguage]['title'];Object.keys(translations.zh).forEach(key=>{if(key!=='title'&&key!=='translateButton'){const element=document.getElementById(key);if(element){const textElement=element.querySelector('p');if(textElement){textElement.textContent=translations[currentLanguage][key];}}}});}function initTranslateButton(){const translateButton=document.createElement('button');translateButton.id='translateButton';translateButton.textContent=translations[currentLanguage]['translateButton'];translateButton.className='translate-button';translateButton.addEventListener('click',toggleLanguage);document.body.appendChild(translateButton);}function loadLanguagePreference(){try{currentLanguage='zh';const savedLanguage=localStorage.getItem('preferredLanguage');if(savedLanguage&&(savedLanguage==='zh'||savedLanguage==='en')){currentLanguage=savedLanguage;}}catch(e){console.error('Failed to load language preference:',e);}}function init(){loadLanguagePreference();initTranslateButton();applyTranslations();console.log('Translation initialized');}if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',init);}else{init();}window.translationApp={toggleLanguage:toggleLanguage,init:init};})();